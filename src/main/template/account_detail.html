<div ng-show="accountOwner == null && accountOwnerError == null && accountDesc == null">Sto caricando...</div>
<h3 ng-show="accountOwner">Conto di <span ng-repeat="o in accountOwner">{{$last ? ' e ' : $first ? '' : ', '}}<span ng-if="!viewableContacts" title="Da {{o[4] | date}} a {{ o[5] == null ? 'oggi' : o[5] | date}}">{{ o[0] }} {{ o[1] }} {{ o[2] }}</span><a ng-if="viewableContacts" href="#/person/{{o[3]}}/detail" title="Da {{o[4] | date}} a {{ o[5] == null ? 'oggi' : o[5] | date}}">{{ o[0] }} {{ o[1] }} {{ o[2] }}</a></span> (<a href="/account/{{accId}}/xls">xls</a>)</h3>
<div ng-show="accountDesc">{{ accountDesc[0] }} di {{ accountDesc[1] }} (<a href="/account/{{accId}}/xls">xls</a>)</div>
<h4 ng-show="amount != null">Saldo: {{amount[0] | currency : amount[1] }}</h4>
<div ng-show="accountOwnerError">Informazioni sul titolare del conto non disponibili: {{ accountOwnerError }}.</div>

<table class="table" when-scrolled="loadMore()">
  <thead>
      <th>Data</th>
      <th>Descrizione</th>
      <th>Importo</th>
  </thead>
  <tbody>
    <tr ng-repeat="mov in movements" class="mov-row" ng-click="showTransaction(mov)">
      <td>{{ mov[1] | date:"shortDate" }}</td>
      <td ng-class="mov[2] ? 'desc2' : ''">{{ mov[0] }}<br/><small>{{ mov[2] }}</small></td>
      <td>{{ mov[3] | currency : mov[5] }}</td>
    </tr>

  </tbody>
</table>

<div ng-show="movements == null && movementsError == null">
  <div class="message">Sto caricando i dati, un attimo di pazienza.</div>
</div>

<div ng-show="movementsError">
  <div class="server-error">
    <p>Qualcosa è andato storto, <a href="" ng-click="toggleErrorMessage()">clicca per saperne di più</a>.</p>
    <p ng-show="showErrorMessage" class="message">{{ serverError }}</p> <!-- TODO: serverError è html... -->
    <p>Se il messaggio non ti dice niente prova a ricaricare la pagina.
       Dopo qualche tentativo fallito, contatta il cassiere direttamente o sulla mailing list.
    </p>
  </div>
</div>
